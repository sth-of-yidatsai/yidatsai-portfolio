/* 自訂滑鼠游標樣式 */
.custom-cursor {
  position: fixed;
  top: 0;
  left: 0;
  pointer-events: none;
  z-index: 2147483646;
  /* 只負責位置，避免 scale 過渡影響位置追蹤 */
  transform: translate3d(var(--cursor-x, 0), var(--cursor-y, 0), 0);
  will-change: transform;
  /* 使用 mix-blend-mode 實現反色效果 */
  mix-blend-mode: difference;
  /* 確保混合模式能正常運作 */
  isolation: auto;
}

.custom-cursor-shape {
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background-color: white;
  transform: translate(-50%, -50%) scale(var(--cursor-scale, 1));
  transition: transform 0.15s ease-out;
  will-change: transform;
  /* 確保形狀本身不會干擾混合模式 */
}

.custom-cursor-dot {
  position: fixed;
  top: 0;
  left: 0;
  pointer-events: none;
  z-index: 2147483647;
  transform: translate3d(var(--cursor-dot-x, 0), var(--cursor-dot-y, 0), 0);
  will-change: transform;
  /* 使用 mix-blend-mode 實現反色效果 */
  mix-blend-mode: difference;
  /* 確保混合模式能正常運作 */
  isolation: auto;
}

.custom-cursor-dot-shape {
  width: 6px;
  height: 6px;
  background-color: white;
  border-radius: 50%;
  transform: translate(-50%, -50%) scale(var(--cursor-dot-scale, 1));
  transition: transform 0.12s ease-out;
  will-change: transform;
  /* 確保形狀本身不會干擾混合模式 */
}

/* 點擊狀態 */
.custom-cursor.clicking {
  --cursor-scale: 0.8;
}

/* clicking 狀態由 scale 控制，不覆寫顏色 */

.custom-cursor-dot.clicking {
  --cursor-dot-scale: 1.5;
}

/* 懸停狀態 */
.custom-cursor.hovering {
  --cursor-scale: 1.5;
}

/* hovering 狀態由 scale 控制，不覆寫顏色 */

/* 針對不同主題的適配（固定使用白色搭配 difference 做反色） */
/* 移除 @media 查詢，統一使用白色背景配合 mix-blend-mode: difference */

/* 確保在移動設備上隱藏自訂游標 */
@media (hover: none) and (pointer: coarse) {
  .custom-cursor,
  .custom-cursor-dot {
    display: none !important;
  }
}

/* 針對觸控設備的優化（移除僅以寬度判斷的隱藏，避免桌面小視窗無游標） */

/* 動畫效果 */
@keyframes cursorPulse {
  0% {
    transform: translate(-50%, -50%) scale(1);
  }
  50% {
    transform: translate(-50%, -50%) scale(1.1);
  }
  100% {
    transform: translate(-50%, -50%) scale(1);
  }
}

/* 特殊互動狀態 */
.custom-cursor.pulse .custom-cursor-shape {
  animation: cursorPulse 0.6s ease-in-out;
}
